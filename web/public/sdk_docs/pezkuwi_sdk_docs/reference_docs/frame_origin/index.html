<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Learn about Origins, a topic in FRAME that enables complex account abstractions to be built."><title>pezkuwi_sdk_docs::reference_docs::frame_origin - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="pezkuwi_sdk_docs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.1 (ed61e7d7e 2025-11-07)" data-channel="1.91.1" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-263c88ec.css"></noscript><link rel="icon" href="https://pezkuwichain.io/favicon.ico"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module frame_origin</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../pezkuwi_sdk_docs/index.html">pezkuwi_<wbr>sdk_<wbr>docs</a><span class="version">0.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module frame_<wbr>origin</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#frame-origin" title="FRAME Origin">FRAME Origin</a><ul><li><a href="#context" title="Context">Context</a></li><li><a href="#adding-custom-pallet-origin-to-the-runtime" title="Adding Custom Pallet Origin to the Runtime">Adding Custom Pallet Origin to the Runtime</a></li><li><a href="#asserting-on-a-custom-internal-origin" title="Asserting on a Custom Internal Origin">Asserting on a Custom Internal Origin</a></li><li><a href="#asserting-on-a-custom-external-origin" title="Asserting on a Custom External Origin">Asserting on a Custom External Origin</a></li><li><a href="#obtaining-abstract-origins" title="Obtaining Abstract Origins">Obtaining Abstract Origins</a></li><li><a href="#further-references" title="Further References">Further References</a></li></ul></li></ul><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In pezkuwi_<wbr>sdk_<wbr>docs::<wbr>reference_<wbr>docs</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">pezkuwi_sdk_docs</a>::<wbr><a href="../index.html">reference_docs</a></div><h1>Module <span>frame_<wbr>origin</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/pezkuwi_sdk_docs/reference_docs/frame_origin.rs.html#1-270">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Learn about <em>Origins</em>, a topic in FRAME that enables complex account abstractions to be built.</p>
<h2 id="frame-origin"><a class="doc-anchor" href="#frame-origin">§</a>FRAME Origin</h2>
<p>Let’s start by clarifying a common wrong assumption about Origin:</p>
<p><strong>ORIGIN IS NOT AN ACCOUNT ID</strong>.</p>
<p>FRAME’s origin abstractions allow you to convey meanings far beyond just an account-id being the
caller of an extrinsic. Nonetheless, an account-id having signed an extrinsic is one of the
meanings that an origin can convey. This is the commonly used [<code>frame_system::ensure_signed</code>],
where the return value happens to be an account-id.</p>
<p>Instead, let’s establish the following as the correct definition of an origin:</p>
<blockquote>
<p>The origin type represents the privilege level of the caller of an extrinsic.</p>
</blockquote>
<p>That is, an extrinsic, through checking the origin, can <em>express what privilege level it wishes
to impose on the caller of the extrinsic</em>. One of those checks can be as simple as “<em>any account
that has signed a statement can pass</em>”.</p>
<p>But the origin system can also express more abstract and complicated privilege levels. For
example:</p>
<ul>
<li>If the majority of token holders agreed upon this. This is more or less what the
[<code>pallet_democracy</code>] does under the hood (<a href="https://github.com/pezkuwichain/pezkuwi-sdk/blob/edd95b3749754d2ed0c5738588e872c87be91624/substrate/frame/democracy/src/lib.rs#L1603-L1633">reference</a>).</li>
<li>If a specific ratio of an instance of [<code>pallet_collective</code>]/DAO agrees upon this.</li>
<li>If another consensus system, for example a bridged network or a teyrchain, agrees upon this.</li>
<li>If the majority of validator/authority set agrees upon this<sup id="fnref1"><a href="#fn1">1</a></sup>.</li>
<li>If caller holds a particular NFT.</li>
</ul>
<p>and many more.</p>
<h3 id="context"><a class="doc-anchor" href="#context">§</a>Context</h3>
<p>First, let’s look at where the <code>origin</code> type is encountered in a typical pallet. The <code>origin: OriginFor&lt;T&gt;</code> has to be the first argument of any given callable extrinsic in FRAME:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="attr">#[pallet::call]
</span><span class="kw">impl</span>&lt;T: Config&gt; Pallet&lt;T&gt; {
	<span class="kw">pub fn </span>do_something(_origin: OriginFor&lt;T&gt;) -&gt; DispatchResult {
		<span class="comment">//              ^^^^^^^^^^^^^^^^^^^^^
		</span><span class="macro">todo!</span>();
	}
}</code></pre></div>
<p>Typically, the code of an extrinsic starts with an origin check, such as
[<code>frame_system::ensure_signed</code>].</p>
<p>Note that <a href="frame_system::pallet_prelude::OriginFor"><code>OriginFor</code></a> is merely a shorthand for
[<code>frame_system::Config::RuntimeOrigin</code>]. Given the name prefix <code>Runtime</code>, we can learn that
<code>RuntimeOrigin</code> is similar to <code>RuntimeCall</code> and others, a runtime composite enum that is
amalgamated at the runtime level. Read <a href="../frame_runtime_types/index.html" title="mod pezkuwi_sdk_docs::reference_docs::frame_runtime_types"><code>crate::reference_docs::frame_runtime_types</code></a> to
familiarize yourself with these types.</p>
<p>To understand this better, we will next create a pallet with a custom origin, which will add a
new variant to <code>RuntimeOrigin</code>.</p>
<h3 id="adding-custom-pallet-origin-to-the-runtime"><a class="doc-anchor" href="#adding-custom-pallet-origin-to-the-runtime">§</a>Adding Custom Pallet Origin to the Runtime</h3>
<p>For example, given a pallet that defines the following custom origin:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="attr">#[pallet::origin]
#[derive(
	PartialEq,
	Eq,
	Clone,
	RuntimeDebug,
	Encode,
	Decode,
	DecodeWithMemTracking,
	TypeInfo,
	MaxEncodedLen,
)]
</span><span class="kw">pub enum </span>Origin {
	<span class="doccomment">/// If all holders of a particular NFT have agreed upon this.
	</span>AllNftHolders,
	<span class="doccomment">/// If all validators have agreed upon this.
	</span>ValidatorSet,
}</code></pre></div>
<p>And a runtime with the following pallets:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="macro">construct_runtime!</span>(
	<span class="kw">pub struct </span>Runtime {
		System: frame_system,
		PalletWithCustomOrigin: pallet_with_custom_origin,
	}
);</code></pre></div>
<p>The type <a href="runtime_for_origin/struct.RuntimeOrigin.html" title="struct pezkuwi_sdk_docs::reference_docs::frame_origin::runtime_for_origin::RuntimeOrigin"><code>crate::reference_docs::frame_origin::runtime_for_origin::RuntimeOrigin</code></a> is expanded.
This <code>RuntimeOrigin</code> contains a variant for the [<code>frame_system::RawOrigin</code>] and the custom
origin of the pallet.</p>
<blockquote>
<p>Notice how the [<code>frame_system::ensure_signed</code>] is nothing more than a <code>match</code> statement. If
you want to know where the actual origin of an extrinsic is set (and the signature
verification happens, if any), see
[<code>sp_runtime::generic::CheckedExtrinsic#trait-implementations</code>], specifically
[<code>sp_runtime::traits::Applyable</code>]’s implementation.</p>
</blockquote>
<h3 id="asserting-on-a-custom-internal-origin"><a class="doc-anchor" href="#asserting-on-a-custom-internal-origin">§</a>Asserting on a Custom Internal Origin</h3>
<p>In order to assert on a custom origin that is defined within your pallet, we need a way to first
convert the <code>&lt;T as frame_system::Config&gt;::RuntimeOrigin</code> into the local <code>enum Origin</code> of the
current pallet. This is a common process that is explained in
<a href="../frame_runtime_types/index.html#%20adding-further-constraints-to-runtime-composite-enums" title="mod pezkuwi_sdk_docs::reference_docs::frame_runtime_types"><code>crate::reference_docs::frame_runtime_types</code></a>.</p>
<p>We use the same process here to express that <code>RuntimeOrigin</code> has a number of additional bounds,
as follows.</p>
<ol>
<li>Defining a custom <code>RuntimeOrigin</code> with further bounds in the pallet.</li>
</ol>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="attr">#[pallet::config]
</span><span class="kw">pub trait </span>Config: frame_system::Config {
	<span class="kw">type </span>RuntimeOrigin: From&lt;&lt;<span class="self">Self </span><span class="kw">as </span>frame_system::Config&gt;::RuntimeOrigin&gt;
		+ Into&lt;<span class="prelude-ty">Result</span>&lt;Origin, &lt;<span class="self">Self </span><span class="kw">as </span>Config&gt;::RuntimeOrigin&gt;&gt;;
}</code></pre></div>
<ol start="2">
<li>Using it in the pallet.</li>
</ol>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="attr">#[pallet::call]
</span><span class="kw">impl</span>&lt;T: Config&gt; Pallet&lt;T&gt; {
	<span class="kw">pub fn </span>only_validators(origin: OriginFor&lt;T&gt;) -&gt; DispatchResult {
		<span class="comment">// first, we convert from `&lt;T as frame_system::Config&gt;::RuntimeOrigin` to `&lt;T as
		// Config&gt;::RuntimeOrigin`
		</span><span class="kw">let </span>local_runtime_origin = &lt;&lt;T <span class="kw">as </span>Config&gt;::RuntimeOrigin <span class="kw">as </span>From&lt;
			&lt;T <span class="kw">as </span>frame_system::Config&gt;::RuntimeOrigin,
		&gt;&gt;::from(origin);
		<span class="comment">// then we convert to `origin`, if possible
		</span><span class="kw">let </span>local_origin =
			local_runtime_origin.into().map_err(|<span class="kw">_</span>| <span class="string">"invalid origin type provided"</span>)<span class="question-mark">?</span>;
		<span class="macro">ensure!</span>(<span class="macro">matches!</span>(local_origin, Origin::ValidatorSet), <span class="string">"Not authorized"</span>);
		<span class="macro">todo!</span>();
	}
}</code></pre></div><h3 id="asserting-on-a-custom-external-origin"><a class="doc-anchor" href="#asserting-on-a-custom-external-origin">§</a>Asserting on a Custom External Origin</h3>
<p>Very often, a pallet wants to have a parameterized origin that is <strong>NOT</strong> defined within the
pallet. In other words, a pallet wants to delegate an origin check to something that is
specified later at the runtime level. Like many other parameterizations in FRAME, this implies
adding a new associated type to <code>trait Config</code>.</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="attr">#[pallet::config]
</span><span class="kw">pub trait </span>Config: frame_system::Config {
	<span class="kw">type </span>ExternalOrigin: EnsureOrigin&lt;<span class="self">Self</span>::RuntimeOrigin&gt;;
}</code></pre></div>
<p>Then, within the pallet, we can simply use this “unknown” origin check type:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="attr">#[pallet::call]
</span><span class="kw">impl</span>&lt;T: Config&gt; Pallet&lt;T&gt; {
	<span class="kw">pub fn </span>externally_checked_ext(origin: OriginFor&lt;T&gt;) -&gt; DispatchResult {
		T::ExternalOrigin::ensure_origin(origin)<span class="question-mark">?</span>;
		<span class="macro">todo!</span>();
	}
}</code></pre></div>
<p>Finally, at the runtime, any implementation of [<code>frame::traits::EnsureOrigin</code>] can be passed.</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">impl </span>pallet_with_external_origin::Config <span class="kw">for </span>Runtime {
	<span class="kw">type </span>ExternalOrigin = EnsureSigned&lt;&lt;<span class="self">Self </span><span class="kw">as </span>frame_system::Config&gt;::AccountId&gt;;
}</code></pre></div>
<p>Indeed, some of these implementations of [<code>frame::traits::EnsureOrigin</code>] are similar to the ones
that we know about: [<code>frame::runtime::prelude::EnsureSigned</code>],
[<code>frame::runtime::prelude::EnsureSignedBy</code>], [<code>frame::runtime::prelude::EnsureRoot</code>],
[<code>frame::runtime::prelude::EnsureNone</code>], etc. But, there are also many more that are not known
to us, and are defined in other pallets.</p>
<p>For example, [<code>pallet_collective</code>] defines [<code>pallet_collective::EnsureMember</code>] and
[<code>pallet_collective::EnsureProportionMoreThan</code>] and many more, which is exactly what we alluded
to earlier in this document.</p>
<p>Make sure to check the full list of <a href="frame::traits::EnsureOrigin#implementors">implementors of
<code>EnsureOrigin</code></a> for more inspiration.</p>
<h3 id="obtaining-abstract-origins"><a class="doc-anchor" href="#obtaining-abstract-origins">§</a>Obtaining Abstract Origins</h3>
<p>So far we have learned that FRAME pallets can assert on custom and abstract origin types,
whether they are defined within the pallet or not. But how can we obtain these abstract origins?</p>
<blockquote>
<p>All extrinsics that come from the outer world can generally only be obtained as either
<code>signed</code> or <code>none</code> origin.</p>
</blockquote>
<p>Generally, these abstract origins are only obtained within the runtime, when a call is
dispatched within the runtime.</p>
<h3 id="further-references"><a class="doc-anchor" href="#further-references">§</a>Further References</h3>
<ul>
<li><a href="https://youtu.be/j7b8Upipmeg?si=83_XUgYuJxMwWX4g&amp;t=195">Gavin Wood’s speech about FRAME features at Protocol Berg 2023.</a></li>
<li><a href="https://exchange.pezkuwichain.app/questions/10992/how-do-you-find-the-public-key-for-the-medium-spender-track-origin">A related StackExchange question.</a></li>
</ul>
<div class="footnotes"><hr><ol><li id="fn1"><p>Inherents are essentially unsigned extrinsics that need an [<code>frame_system::ensure_none</code>]
origin check, and through the virtue of being an inherent, are agreed upon by all validators.&nbsp;<a href="#fnref1">↩</a></p></li></ol></div></div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="pallet_for_origin/index.html" title="mod pezkuwi_sdk_docs::reference_docs::frame_origin::pallet_for_origin">pallet_<wbr>for_<wbr>origin</a></dt><dd>The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</dd><dt><a class="mod" href="pallet_with_custom_origin/index.html" title="mod pezkuwi_sdk_docs::reference_docs::frame_origin::pallet_with_custom_origin">pallet_<wbr>with_<wbr>custom_<wbr>origin</a></dt><dd>The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</dd><dt><a class="mod" href="pallet_with_external_origin/index.html" title="mod pezkuwi_sdk_docs::reference_docs::frame_origin::pallet_with_external_origin">pallet_<wbr>with_<wbr>external_<wbr>origin</a></dt><dd>The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</dd><dt><a class="mod" href="runtime_for_external_origin/index.html" title="mod pezkuwi_sdk_docs::reference_docs::frame_origin::runtime_for_external_origin">runtime_<wbr>for_<wbr>external_<wbr>origin</a></dt><dt><a class="mod" href="runtime_for_origin/index.html" title="mod pezkuwi_sdk_docs::reference_docs::frame_origin::runtime_for_origin">runtime_<wbr>for_<wbr>origin</a></dt></dl></section></div></main></body></html>